(this.webpackJsonpmaint_log_frontend_react=this.webpackJsonpmaint_log_frontend_react||[]).push([[0],{24:function(e,t,a){e.exports=a.p+"static/media/search.fb5ad7c7.svg"},25:function(e,t,a){e.exports=a.p+"static/media/addLog.a918556d.svg"},26:function(e,t,a){e.exports=a.p+"static/media/todo.91e3307a.svg"},27:function(e,t,a){e.exports=a.p+"static/media/account.e5a41a1f.svg"},28:function(e,t,a){e.exports=a.p+"static/media/log.0476682c.svg"},34:function(e,t,a){e.exports=a.p+"static/media/magnifying.369e264b.svg"},35:function(e,t,a){e.exports=a.p+"static/media/editPencil.bd86eac2.svg"},36:function(e,t,a){e.exports=a.p+"static/media/home.d6ad0c97.svg"},46:function(e,t,a){},53:function(e,t,a){e.exports=a(98)},77:function(e,t,a){},78:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(47),o=a.n(l),s=a(1),c=a.n(s),i=a(3),u=a(18),m=a(19),d=a(21),p=a(20),h=r.a.createContext(),g=h.Provider,v=h.Consumer,E=h,f=a(2),b=a(6),_=a(48),w=a(11),k=a(12),y=a.n(k),N=a(9),C=a.n(N);a(77);var O=function(e){return e&&e.message?r.a.createElement("div",{className:"loading"},e.message.charAt(0).toUpperCase()+e.message.slice(1)):null};a(78);var S=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"photos__header"},"Photos"),r.a.createElement("div",{className:"photos__div"},e.photos.map((function(t){return""===t||0===t.length?null:r.a.createElement("div",{key:t,className:"single__photo__div"},r.a.createElement("img",{className:"single__photo",src:"http://res.cloudinary.com/c00p/image/upload/".concat(t),alt:t}),!e.editingBlocked&&r.a.createElement(f.b,{className:"button delete__photo",to:"/delete/photo/".concat(t),onClick:e.deletePhoto,title:"Delete This Photo"},"Delete Photo"))}))))},j=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){if(e.target.files)return n.setState({file:e.target.files[0]});n.setState(Object(w.a)({},e.target.name,e.target.value))},n.apiEditLog=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,l,o,s,i,u,m,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({loading:!0}),a="",a=n.props&&n.props.log?"".concat("https://maint-log.herokuapp.com","/add/").concat(n.props.log.id):"".concat("https://maint-log.herokuapp.com","/add"),(r=new FormData(document.getElementById("logForm"))).append("dateEntered",y()(Date.now()).format("YYYY-MM-DD")),r.append("api",!0),n.props.log&&n.props.log.photos&&n.props.log.photos.length>0?r.append("photos",n.props.log.photos):r.append("photos",[]),n.state.id&&r.append("id",n.state.id),console.log("FORM DATA before posting:"),l=Object(_.a)(r);try{for(l.s();!(o=l.n()).done;)s=o.value,console.log(r[s],s)}catch(c){l.e(c)}finally{l.f()}return e.prev=12,e.next=15,C.a.post(a,r);case 15:if(i=e.sent,console.log("result received"),console.log(i),200!==i.status){e.next=27;break}u=i.data.fullLog,m=i.data.newLogEntry,(d=n.props.user).log=u,n.props.updateUserState(d),n.props.history.push("/log/".concat(m.slug)),e.next=30;break;case 27:throw console.log("Response received but with status code: "+i.status),new Error(i.error);case 30:e.next=40;break;case 32:e.prev=32,e.t0=e.catch(12),console.log("Error with LogForm. Unable to add/edit Log Entry. Please try again later."),console.dir(e.t0),console.log(e.t0),console.table(e.t0),n.setState({loading:!1}),alert(e.t0);case 40:case"end":return e.stop()}}),e,null,[[12,32]])})));return function(t){return e.apply(this,arguments)}}(),n.toggleDeleteButton=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({showDeleteButton:!n.state.showDeleteButton});case 1:case"end":return e.stop()}}),e)}))),n.deleteLogEntry=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.setState({loading:!0});case 3:return e.prev=3,e.next=6,C.a.post("".concat("https://maint-log.herokuapp.com","/delete/log/entry/").concat(n.state.id));case 6:if(null!==(a=e.sent).data){e.next=13;break}return console.log("Server unable to find specified log entry. Was it already deleted?"),e.next=11,n.setState({loading:!1});case 11:e.next=20;break;case 13:if(200!==a.status){e.next=20;break}return r=n.props.user.log.filter((function(e){return e.id!==n.state.id})),(l=n.props.user).log=r,e.next=19,n.props.updateUserState(l);case 19:n.props.history.push("/log");case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(3),console.error(e.t0),e.next=27,n.setState({loading:!1});case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t){return e.apply(this,arguments)}}(),n.deletePhoto=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="".concat("https://maint-log.herokuapp.com").concat(t.target.pathname),e.prev=2,e.next=5,C.a.post(a);case 5:null===(r=e.sent).data?console.log("Server unable to find specified photo to delete. Was it already deleted?"):200===r.status&&((l=n.props.user).log=r.data,n.props.updateUserState(l),n.props.history.push("/log/".concat(n.props.log._id,"/edit"))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),alert("Problem deleting photo. Please try again."),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.alignViewToElement=function(e){e.preventDefault(),e.target.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})},n.state={id:"",shortDescription:"",longDescription:"",dateStarted:"",dateCompleted:"",dateEntered:"",dateDue:"",file:"",mileageDue:"",name:"",odometer:"",tools:"",parts:"",partsCost:"",laborCost:"",serviceLocation:"",photos:[],receipts:"",vehicle:"",showDeleteButton:!1,loading:!0,api:!0},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){if(!this.props)return this.setState({loading:!1});if(!this.props.log)return this.setState({loading:!1});var e="",t="",a="",n="";this.props.log.dateStarted&&(e=y()(this.props.log.dateStarted).format("YYYY-MM-DD")),this.props.log.dateCompleted&&(t=y()(this.props.log.dateCompleted).format("YYYY-MM-DD")),this.props.log.dateEntered&&(a=y()(this.props.log.dateEntered).format("YYYY-MM-DD")),this.props.log.dateDue&&(n=y()(this.props.log.dateDue).format("YYYY-MM-DD")),this.setState({id:this.props.log.id,shortDescription:this.props.log.shortDescription,longDescription:this.props.log.longDescription,dateStarted:e,dateCompleted:t,dateEntered:a,dateDue:n,mileageDue:this.props.log.mileageDue||"",name:this.props.log.name,odometer:this.props.log.odometer,tools:this.props.log.tools,parts:this.props.log.parts,partsCost:this.props.log.partsCost,laborCost:this.props.log.laborCost,serviceLocation:this.props.log.serviceLocation,receipts:this.props.log.receipts,vehicle:this.props.log.vehicle,selectedVehicles:this.props.user.selectedVehicles&&this.props.user.selectedVehicles.length>0&&void 0!==this.props.user.selectedVehicles[0]&&this.props.user.selectedVehicles||this.props.user.vehicles,loading:!1})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(O,{message:"Formatting and Saving Log Changes..."}):!this.props.user.vehicles||this.props.user.vehicles.length<1||this.props.user.vehicles.length>0&&void 0===this.props.user.vehicles[0]?r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"No Vehicle Associated With This Account"),r.a.createElement("div",{className:"card no__vehicle warning"},r.a.createElement("span",null,"Before entering a service record, please: "),r.a.createElement(f.b,{to:"/settings",className:"button"},"Click Here To Add A Vehicle To Your Account"))):r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,this.state.id?r.a.createElement("span",null,"Editing",r.a.createElement(f.b,{to:"/log/".concat(this.props.log.slug)},this.state.name.length>120?" ".concat(this.state.name.substring(0,120),"... "):" ".concat(this.state.name," "))):"Add New Log Entry"),r.a.createElement("div",{className:"card padded"},r.a.createElement("form",{className:"form",id:"logForm",onSubmit:this.apiEditLog,method:"POST",encType:"multipart/form-data",multiple:"multiple"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",autoFocus:!0,value:this.state.name,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"vehicle"},"Vehicle"),r.a.createElement("select",{id:"vehicle",name:"vehicle",required:"required",defaultValue:"Please select a vehicle...",onChange:this.handleInputChange},this.props.user.vehicles&&this.props.user.vehicles.length>0&&this.props.user.vehicles.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},"".concat(e.year," ").concat(e.make," ").concat(e.model))}))),r.a.createElement("label",{htmlFor:"dateStarted"},"Date Started"),r.a.createElement("input",{type:"date",name:"dateStarted",value:this.state.dateStarted,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"dateCompleted"},"Date Completed"),r.a.createElement("input",{type:"date",name:"dateCompleted",value:this.state.dateCompleted,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"dateDue"},"On what date will this item need to be completed next?"),r.a.createElement("input",{type:"date",name:"dateDue",value:this.state.dateDue,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"mileageDue"},"At what mileage will this item need to be completed next?"),r.a.createElement("input",{type:"number",name:"mileageDue",min:"0",step:"1",value:this.state.mileageDue,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"shortDescription"},"Short Description"),r.a.createElement("textarea",{name:"shortDescription",autoComplete:"on",spellCheck:"true",value:this.state.shortDescription,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"longDescription"},"Long Description"),r.a.createElement("textarea",{name:"longDescription",autoComplete:"on",spellCheck:"true",value:this.state.longDescription,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"tools"},"Tools"),r.a.createElement("input",{type:"text",name:"tools",value:this.state.tools,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"parts"},"Parts"),r.a.createElement("input",{type:"text",name:"parts",value:this.state.parts,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"partsCost"},"Cost of Parts"),r.a.createElement("span",{className:"moneySign"},"$",r.a.createElement("input",{className:"moneyInput",type:"number",name:"partsCost",min:"0",step:"0.01",value:this.state.partsCost,onChange:this.handleInputChange,onFocus:this.alignViewToElement})),r.a.createElement("label",{htmlFor:"laborCost"},"Cost of Labor"),r.a.createElement("span",{className:"moneySign"},"$",r.a.createElement("input",{className:"moneyInput",type:"text",name:"laborCost",min:"0",step:"0.01",value:this.state.laborCost,onChange:this.handleInputChange,onFocus:this.alignViewToElement})),r.a.createElement("label",{htmlFor:"serviceLocation"},"Service Location (Name and Address of Mechanic or Self)"),r.a.createElement("input",{type:"text",name:"serviceLocation",value:this.state.serviceLocation,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"odometer"},"Odometer"),r.a.createElement("input",{type:"number",name:"odometer",min:"0",value:this.state.odometer,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"file"},"Upload other images",r.a.createElement("input",{type:"file",name:"file",accept:"image/gif, image/png, image/jpeg",onChange:this.handleInputChange})),r.a.createElement("input",{className:"button submit",type:"submit",value:"Save Log"})),this.props.log&&this.props.log.photos&&this.props.log.photos.length>0&&r.a.createElement(S,{photos:this.props.log.photos,deletePhoto:this.deletePhoto}),this.state.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button delete__log__entry",onClick:this.toggleDeleteButton,title:"Delete Log Entry"},"Delete Log Entry"),this.state.showDeleteButton&&r.a.createElement("button",{className:"button delete__log__entry__confirm",onClick:this.deleteLogEntry,title:"Permanently Delete Log Entry"},"Permanently Delete Log Entry"))))}}]),a}(r.a.Component);var x=function(e){var t=Object(b.g)();return r.a.createElement(j,Object.assign({},e,{history:t}))};var D=function(e){var t=Object(b.g)(),a=Object(b.i)().id,n=e.user.log.filter((function(e){return e.id===a}));return r.a.createElement(j,Object.assign({},e,{log:n[0],history:t}))},V=a(4),L=a(5);a(84);var F=function(e){var t=Object(n.useState)(!1),a=Object(L.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)(!1),c=Object(L.a)(s,2),i=c[0],u=c[1],m=r.a.createRef();return i?r.a.createElement(O,{message:"Sending password reset email..."}):l?l?r.a.createElement("div",{className:"forgot__password__container padded"},r.a.createElement("button",{className:"button close__button",onClick:function(){return o(!1)}},"\xd7"),r.a.createElement("h3",null,"I forgot my password!"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log("Forgot password form submitted."),console.log(m.current.value),u(!0),alert("Password resets are not currently enabled. Apologies."),setTimeout((function(){u(!1)}),500)},method:"POST"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",defaultValue:e.email,ref:m}),r.a.createElement("input",{className:"button",type:"submit",value:"Send a Reset"}))):void 0:r.a.createElement("div",{className:"padded"},r.a.createElement("button",{className:"button",onClick:function(){return o(!0)}},"Forgot Your Password?"))};function I(e,t){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(c.a.mark((function e(t,a){var n,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}return e.abrupt("return",new Error("No email or password provided to Login."));case 2:return e.prev=2,e.next=5,C.a.post("".concat("https://maint-log.herokuapp.com","/api/login"),{email:t,password:a});case 5:if(200!==(n=e.sent).status){e.next=14;break}return(r=n.data).userID=n.data._id,0===(l=r.vehicles.filter((function(e){return e.primary}))).length?r.selectedVehicles=[r.vehicles[0]]:r.selectedVehicles=l,e.abrupt("return",{user:r});case 14:throw console.log("Response received but with status code: "+n.status),new Error(n.error);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(2),console.log("Error posting to ".concat("https://maint-log.herokuapp.com","/api/login")),console.dir(e.t0),e.abrupt("return",e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}function P(e,t,a,n){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(c.a.mark((function e(t,a,n,r){var l,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&n&&r){e.next=2;break}return e.abrupt("return",new Error("Not all registration information provided. Please make sure you have entered a username, email address, password, and confirmed your password before trying again."));case 2:return l="".concat("https://maint-log.herokuapp.com","/api/register"),e.prev=3,e.next=6,C.a.post(l,{name:t,email:a,password:n,passwordConfirm:r});case 6:if(200!==(o=e.sent).status){e.next=16;break}return(s=o.data).userID=o.data._id,s.selectedVehicles=[],s.vehicles=[],s.log=[],e.abrupt("return",{user:s});case 16:throw console.log("Registration response received from the server but with an error and status code: "+o.status),new Error(o.error);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(3),console.log("Error posting to ".concat("https://maint-log.herokuapp.com","/api/register")),console.log(e.t0.response.status),e.abrupt("return",e.t0);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})))).apply(this,arguments)}function A(){return Y.apply(this,arguments)}function Y(){return(Y=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat("https://maint-log.herokuapp.com","/api/log"));case 3:if(t=e.sent,console.log("getLogData returned: "),console.dir(t),200!==t.status){e.next=8;break}return e.abrupt("return",t.data);case 8:throw console.log("Response received but with status code: "+t.status),new Error(t.error);case 13:e.prev=13,e.t0=e.catch(0),console.log("Error getting data from /api/log/"),console.dir(e.t0),alert("Error getting log data please try again");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("".concat("https://maint-log.herokuapp.com","/api/vehicle/add"),t);case 3:if(200!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",A());case 6:throw console.log("Response received but with status code: "+a.status),new Error(a.error);case 11:return e.prev=11,e.t0=e.catch(0),console.log("Error posting to /api/vehicle/add."),console.dir(e.t0),e.abrupt("return",alert("Error adding new vehicle. Please try again."));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function B(e){return q.apply(this,arguments)}function q(){return(q=Object(i.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Updating an extant vehicle: "),console.dir(t),e.prev=2,e.next=5,C.a.post("".concat("https://maint-log.herokuapp.com","/api/vehicle"),t);case 5:if(200!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",A());case 8:throw console.log("Response received but with status code: "+a.status),new Error(a.error);case 13:return e.prev=13,e.t0=e.catch(2),console.log("Error posting to /api/vehicle."),console.dir(e.t0),e.abrupt("return",alert("Error updating vehicle. Please try again."));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function H(e){return W.apply(this,arguments)}function W(){return(W=Object(i.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==Object.keys(t).length){e.next=2;break}return e.abrupt("return",null);case 2:return a=t.name,n=t.email,e.prev=3,e.next=6,C.a.post("".concat("https://maint-log.herokuapp.com","/api/account"),{name:a,email:n});case 6:if(200!==(r=e.sent).status){e.next=9;break}return e.abrupt("return",A());case 9:throw console.log("Response received but with status code: "+r.status),new Error(r.error);case 14:return e.prev=14,e.t0=e.catch(3),console.log("Error posting to /api/account."),console.dir(e.t0),e.abrupt("return",alert("Error updating account. Please try again."));case 19:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}C.a.defaults.withCredentials=!0;var $=["ACG","Aston Martin","Blue","BMW","Buell","Bugatti","Chevrolet","Chrysler","Coachworks","Cooper","Daimler","E-One","Fiat","Ford","GM","Hino","Hombilt","Honda","Hyundai","International","Jaguar","Jialing","Kenworth","Kia","Lamborghini","Land Rover","Latitude","Lotus","Mack","Maserati","Mazda","Mercedes-Benz","Mills","Mitsubishi","NABI","Navistar","Nissan","NUMMI","Optima","Oshkosh","Owosso","PACCAR","Peterbilt","Peugot","Quest","Renault","Rolls Royce","Subaru","Suzuki","Tesla","Toyota","Volkswagen","Volvo"];a(85);var z=function(e){var t=Object(b.g)(),a=Object(n.useState)({email:"",password:""}),l=Object(L.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(L.a)(u,2),d=m[0],p=m[1],h=function(e){var t=e.target,a=t.value,n=t.name;s(Object(V.a)(Object(V.a)({},o),{},Object(w.a)({},n,a)))},g=function(){var a=Object(i.a)(c.a.mark((function a(n){var r,l,s,i;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=o.email,l=o.password,p(!0),a.next=5,I(r,l);case 5:if((s=a.sent)&&void 0===s.response){a.next=9;break}return p(!1),a.abrupt("return",alert("Error logging in. Please try again. Status ".concat(s.response.status,": ").concat(s.response.statusText,".")));case 9:if(i=s.user,console.log("Server returned user:"),console.log(i),0!==Object.keys(i).length){a.next=14;break}return a.abrupt("return",alert("Server could not locate that user. Please try again."));case 14:return i.selectedVehicles&&void 0!==i.selectedVehicles||(i.selectedVehicles=[]),a.next=17,e.updateUserState(i);case 17:return p(!1),console.log("Loading set to false in Login component. Pushing history to /"),a.abrupt("return",t.push("/"));case 20:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return d?r.a.createElement(O,{message:"Logging in...",messages:["Logging in..."]}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{className:"padded",onSubmit:g,method:"POST"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",value:o.email||"",onChange:h}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password...",value:o.password||"",onChange:h}),r.a.createElement("input",{className:"button",type:"submit",value:"Log In \u2192"})),r.a.createElement(F,{email:o.email||""}))};var J=function(e){var t=Object(b.g)(),a=Object(n.useState)({name:"",email:"",password:"",passwordConfirm:""}),l=Object(L.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(L.a)(u,2),d=m[0],p=m[1],h=function(e){s(Object(V.a)(Object(V.a)({},o),{},Object(w.a)({},e.target.name,e.target.value)))},g=function(){var a=Object(i.a)(c.a.mark((function a(n){var r,l,s,i,u;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),console.log(o),r=o.name,l=o.email,s=o.password,i=o.passwordConfirm,p(!0),console.log("Loading. Sending to register: "),console.log(r,l,s,i),a.next=8,P(r,l,s,i);case 8:if((u=a.sent)&&void 0===u.response){a.next=12;break}return p(!1),a.abrupt("return",alert("Error registering a new account. Please try again. Status ".concat(u.response.status,": ").concat(u.response.statusText,".")));case 12:if(0!==Object.keys(u.user).length){a.next=15;break}return p(!1),a.abrupt("return",alert("Server was unable to register you at this time. Please try again."));case 15:return a.next=17,e.updateUserState(u.user);case 17:t.push("/");case 18:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return d?r.a.createElement(O,{message:"Registering New User..."}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Register"),r.a.createElement("form",{className:"padded",onSubmit:g,method:"POST",encType:"multipart/form-data",multiple:"multiple"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"Enter name...",value:o.name||"",onChange:h}),r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",value:o.email||"",onChange:h}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password...",value:o.password||"",onChange:h}),r.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password...",value:o.passwordConfirm||"",onChange:h}),r.a.createElement("input",{className:"button",type:"submit",value:"Register \u2192"})))};var K=function(){var e=Object(n.useState)(document.documentElement.className||"dark"),t=Object(L.a)(e,2),a=t[0],l=t[1];return r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Theme Settings"),r.a.createElement("div",{className:"theme__container padded"},r.a.createElement("label",{htmlFor:"theme",className:""},"".concat(a.substring(0,1).toUpperCase()).concat(a.substring(1)," Mode Enabled")),r.a.createElement("button",{className:"button",onClick:function(e){e.preventDefault();var t="dark"===a?"light":"dark";localStorage.setItem("theme",t),document.documentElement.className=t,l(t)}},"Switch Theme")))};a(86);var G=function(e){var t=Object(n.useContext)(E),a=t.user,l=t.updateUserState;return Object(n.useEffect)((function(){var e=localStorage.getItem("theme")||"dark";document.documentElement.className=e}),[]),r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"welcome__guest__container"},r.a.createElement("section",{className:"welcome__guest__hero"},r.a.createElement("h3",null,"Keep track of the service history of your vehicles."),r.a.createElement("ul",null,r.a.createElement("li",null,"Record what was done, when, by whom, and where."),r.a.createElement("li",null,"Include photos of before and after the service, parts used, and receipts."),r.a.createElement("li",null,"Write short and long descriptions of work done."),r.a.createElement("li",null,"Recurring services can be scheduled for a future due date or mileage."))),r.a.createElement("p",null,r.a.createElement("strong",null,"Returning user? "),"Please login to access your log."),r.a.createElement(z,{user:a,updateUserState:l,history:e.history}),r.a.createElement("p",null,r.a.createElement("strong",null,"New user? "),"Register an account & start tracking your vehicle maintenance."),r.a.createElement(J,{user:a,updateUserState:l,history:e.history}),r.a.createElement(K,null)))},Q=a(10),X=a(24),Z=a.n(X),ee=a(25),te=a.n(ee),ae=a(26),ne=a.n(ae),re=a(27),le=a.n(re),oe=a(28),se=a.n(oe);a(88);var ce=function(e){return console.log("Home page rendering with props:"),console.dir(e),r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"home__actions__container"},r.a.createElement(f.b,{className:"button card home__actions history",to:"/log"},r.a.createElement(Q.a,{src:se.a,role:"img","aria-label":"Log Icon",fallback:function(){return r.a.createElement("img",{src:se.a,alt:"log icon",description:"log icon",className:"svg"})}}),r.a.createElement("p",null,"View Full Maintenance Log History")),r.a.createElement(f.b,{className:"button card home__actions add",to:"/add"},r.a.createElement(Q.a,{src:te.a,role:"img","aria-label":"Add Icon",fallback:function(){return r.a.createElement("img",{src:te.a,alt:"add icon",description:"add icon",className:"svg"})}}),r.a.createElement("p",null,"Add New Log Entry")),r.a.createElement(f.b,{className:"button card home__actions todo upcoming-maintenance",to:"/todo"},r.a.createElement(Q.a,{src:ne.a,role:"img","aria-label":"Todo Icon",fallback:function(){return r.a.createElement("img",{src:ne.a,alt:"todo icon",description:"todo icon",className:"svg"})}}),r.a.createElement("p",null,"View Upcoming Scheduled Maintenance")),r.a.createElement(f.b,{className:"button card home__actions search__main search",to:"/search"},r.a.createElement(Q.a,{src:Z.a,role:"img","aria-label":"Search Icon",fallback:function(){return r.a.createElement("img",{src:Z.a,alt:"search icon",description:"search icon",className:"svg"})}}),r.a.createElement("p",null,"Search Log Entries")),r.a.createElement(f.b,{className:"button card home__actions settings",to:"/settings"},r.a.createElement(Q.a,{src:le.a,role:"img","aria-label":"Settings Icon",fallback:function(){return r.a.createElement("img",{src:le.a,alt:"settings icon",description:"settings icon",className:"svg"})}}),r.a.createElement("p",null,"Edit Your Vehicle & Account Settings"))))};a(46);var ie=function(e){return console.log("Vehicle selector component with props: "),console.dir(e),r.a.createElement("div",{className:"card vehicles__selector vehicles"},r.a.createElement("div",null,r.a.createElement("h4",{className:"flexy vehicles__selector__header"},r.a.createElement("span",null,"Your Vehicles"),r.a.createElement("span",null,"Selected for View"))),(!e.allVehicles||0===e.allVehicles.length)&&r.a.createElement("span",null,"(none)"),e.allVehicles&&e.allVehicles.length>0&&e.allVehicles.map((function(t){return r.a.createElement("div",{key:t.id,className:"well vehicle"},r.a.createElement("p",null,t.year," ",t.make," ",t.model),r.a.createElement("input",{type:"checkbox",checked:e.vehiclesShowing.includes(t.id),name:t.id,onChange:e.changeVehiclesShowing}))})))};a(89);var ue=function(e){var t=e.data;return t?r.a.createElement("div",{className:"card log__entry"},r.a.createElement(f.b,{to:"/log/".concat(t.slug)},r.a.createElement("h4",null,t.name)),r.a.createElement("div",{className:"log__details__container"},r.a.createElement("div",{className:"log__details log__details__service"},r.a.createElement("p",null,t.shortDescription),r.a.createElement("p",null,t.serviceLocation)),r.a.createElement("div",{className:"log__details log__details__dates"},r.a.createElement("p",null,y()(t.dateCompleted).fromNow()),t.dateDue&&r.a.createElement("p",null,"Next ",r.a.createElement("span",null,y()(t.dateDue).fromNow()))),r.a.createElement("div",{className:"log__details log__details__mileage"},r.a.createElement("p",null,t.odometer&&Number(t.odometer).toLocaleString()," miles"),t.mileageDue&&r.a.createElement("p",null,"Next ",r.a.createElement("span",null,Number(t.mileageDue).toLocaleString()))),r.a.createElement("div",{className:"log__details log__details__costs"},r.a.createElement("p",null,"P $",t.partsCost),r.a.createElement("p",null,"L $",t.laborCost)))):r.a.createElement("div",null,"Error loading log data...")},me=a(16);a(90);var de=function(e){function t(t,a){var n=a.target.childNodes[1];if(e&&e.user&&e.user.log&&!(e.user.log.length<=1)){if("date"===t){var r=[];new Date(e.user.log[0].dateCompleted).valueOf()>new Date(e.user.log[1].dateCompleted).valueOf()?(r=Object(me.a)(e.user.log).sort((function(e,t){return new Date(e.dateCompleted).valueOf()-new Date(t.dateCompleted).valueOf()})),n.classList.remove("log__sorter__arrow__selected")):(r=Object(me.a)(e.user.log).sort((function(e,t){return new Date(t.dateCompleted).valueOf()-new Date(e.dateCompleted).valueOf()})),n.classList.add("log__sorter__arrow__selected"));var l=Object(V.a)({},e.user);return l.log=r,void e.updateUserState(l)}if("service"===t){var o=[];e.user.log[0].name.localeCompare(e.user.log[1].name)>-1?(o=Object(me.a)(e.user.log).sort((function(e,t){return e.name.localeCompare(t.name)})),n.classList.add("log__sorter__arrow__selected")):(o=Object(me.a)(e.user.log).sort((function(e,t){return t.name.localeCompare(e.name)})),n.classList.remove("log__sorter__arrow__selected"));var s=Object(V.a)({},e.user);return s.log=o,void e.updateUserState(s)}if("mileage"===t){var c=[];Number(e.user.log[0].odometer)>Number(e.user.log[1].odometer)?(c=Object(me.a)(e.user.log).sort((function(e,t){return Number(e.odometer)<=Number(t.odometer)?-1:1})),n.classList.remove("log__sorter__arrow__selected")):(c=Object(me.a)(e.user.log).sort((function(e,t){return Number(e.odometer)<=Number(t.odometer)?1:-1})),n.classList.add("log__sorter__arrow__selected"));var i=Object(V.a)({},e.user);return i.log=c,void e.updateUserState(i)}if("costs"===t){var u=[];Number(e.user.log[0].partsCost)+Number(e.user.log[0].laborCost)>=Number(e.user.log[1].partsCost)+Number(e.user.log[1].laborCost)?(u=Object(me.a)(e.user.log).sort((function(e,t){return Number(e.partsCost)+Number(e.laborCost)<=Number(t.partsCost)+Number(t.laborCost)?-1:1})),n.classList.remove("log__sorter__arrow__selected")):(u=Object(me.a)(e.user.log).sort((function(e,t){return Number(e.partsCost)+Number(e.laborCost)<=Number(t.partsCost)+Number(t.laborCost)?1:-1})),n.classList.add("log__sorter__arrow__selected"));var m=Object(V.a)({},e.user);return m.log=u,void e.updateUserState(m)}}}return r.a.createElement("div",{className:"log__sorter__container"},r.a.createElement("div",{className:"log__sorter__item log__sorter__service"},r.a.createElement("span",{onClick:function(e){return t("service",e)}},"service ",r.a.createElement("span",{className:"log__sorter__arrow service__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__dates"},r.a.createElement("span",{onClick:function(e){return t("date",e)}},"dates ",r.a.createElement("span",{className:"log__sorter__arrow date__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__mileage"},r.a.createElement("span",{onClick:function(e){return t("mileage",e)}},"mileage ",r.a.createElement("span",{className:"log__sorter__arrow mileage__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__costs"},r.a.createElement("span",{onClick:function(e){return t("costs",e)}},"costs ",r.a.createElement("span",{className:"log__sorter__arrow costs__arrow"},"\u25b4"))))};var pe=function(e){var t=Object(n.useState)([]),a=Object(L.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)([]),c=Object(L.a)(s,2),i=c[0],u=c[1];return Object(n.useEffect)((function(){var t=[];e.user.selectedVehicles.length>0?e.user.selectedVehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})):e.user.vehicles.length>0&&e.user.vehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})),console.log("Found initial vehicleShowing ID(s): "),console.log(t),o([].concat(t));var a=e.user.log.filter((function(e){return t.includes(e.vehicle)}));console.log("Found initial entries showing: "),console.log(a),u(a),console.log("After setup. Entries: "),console.log(i)}),[]),console.log("(After useEffect) Vehicles and Logs: "),console.log(l),console.log(i),r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Service History"),r.a.createElement(ie,{allVehicles:e.user.vehicles,vehiclesShowing:l,changeVehiclesShowing:function(t){var a=t.target.name;console.log("Changing click status for vehicle id: ".concat(a,"."));var n=[];l.includes(a)?(console.log("current vehicles includes this vehicle ID already. Removing it."),n=l.filter((function(e){return e!==a}))):(console.log("current vehicles does not include this vehicle ID. Adding it."),(n=l).push(a)),console.log("Vehicle Updates queued: "),console.log(n),o(n),console.log("Updated which vehicles are displayed. vehiclesShowing state: "),console.log(l),console.log("Log entries updates queued: ");var r=e.user.log.filter((function(e){return n.includes(e.vehicle)}));console.log(r),u(r),console.log("Updated which log entries are displayed: "),console.log(i)}}),0===i.length&&r.a.createElement("div",{className:"card no__log"},r.a.createElement("h3",null,"No Log Entries Found!"),r.a.createElement("div",null,r.a.createElement("p",{className:"padded"},"No log entries for the vehicles selected. Please select more vehicles or add a new entry.")),r.a.createElement(f.b,{className:"button",to:"/add"},"Add A Log Entry Now")),i.length>0&&r.a.createElement("div",{className:"padded"},r.a.createElement(de,e),i&&i.map((function(e){return r.a.createElement(ue,{key:e._id,data:e})}))))};var he=function(){return console.log("unable to find a page associated with this route. redirecting to /welcome"),r.a.createElement(b.a,{to:"/welcome"})};var ge=function(e){return r.a.createElement("section",{className:"search__results"},r.a.createElement("h4",null,"Results: "),r.a.createElement("div",null,e.results.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"card search__result"},r.a.createElement("h3",null,e.name),r.a.createElement("p",{className:"result__detail"},e.shortDescription),r.a.createElement("div",{className:"search__result__buttons"},r.a.createElement(f.b,{to:"log/".concat(e.slug),className:"button"},"View"),r.a.createElement(f.b,{to:"log/".concat(e.id,"/edit"),className:"button"},"Edit")))}))))},ve=a(34),Ee=a.n(ve),fe=(a(91),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).getInfo=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat("https://maint-log.herokuapp.com","/api/search?q=").concat(n.state.query));case 3:(t=e.sent).data.length&&n.setState({results:t.data,searching:!1}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error posting to /api/search"),console.dir(e.t0),alert("Error searching log data! Please try again.");case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleInputChange=function(e){e.preventDefault(),n.setState({query:e.target.value,searching:!0,results:[]},(function(){n.state.query&&n.state.query.length>1&&Date.now()-n.state.counter>500?(n.getInfo(),n.setState({counter:Date.now()})):setTimeout((function(){n.getInfo()}),500)}))},n.blurCleanup=function(){0===n.state.query.length&&n.setState({results:[]})},n.clearInput=function(e){e.preventDefault(),n.setState({query:"",searching:!1,results:[]})},n.state={query:"",results:[],searching:!1,counter:0},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state.query&&this.state.query.length>0?r.a.createElement("strong",null,"\xd7"):r.a.createElement(Q.a,{src:Ee.a,role:"img","aria-label":"Magnifying Glass Icon",fallback:function(){return r.a.createElement("img",{src:Ee.a,alt:"magnifying glass icon",description:"magnifying glass icon",className:"svg"})}});return r.a.createElement("form",{className:"search__form"},r.a.createElement("div",{className:"search__input__container"},r.a.createElement("input",{placeholder:"Search parts, service, etc...",onKeyUp:this.handleInputChange,onChange:this.handleInputChange,onBlur:this.blurCleanup,value:this.state.query,className:"search__input"}),r.a.createElement("button",{className:"button search__button",onClick:this.clearInput},e)),this.state.loading&&r.a.createElement(O,{message:"Searching for: ".concat(this.state.query)}),this.state.results&&this.state.results.length>0&&r.a.createElement(ge,{homepage:this.props.homepage,results:this.state.results}),0===this.state.results.length&&this.state.query.length>0&&r.a.createElement("h5",null,"No match found for that search..."))}}]),a}(r.a.Component));var be=function(){return r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Search"),r.a.createElement("div",{className:"card"},r.a.createElement(fe,null)))};var _e=function(e){var t=Object(b.g)(),a=Object(n.useState)(!1),l=Object(L.a)(a,2),o=l[0],s=l[1],u=function(){var a=Object(i.a)(c.a.mark((function a(n){var r;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,C.a.post("".concat("https://maint-log.herokuapp.com","/api/logout"));case 4:if(200!==(r=a.sent).status){a.next=10;break}return e.updateUserState({name:"",userID:"",sessionID:"",cookies:"",email:"",log:[],vehicles:[],selectedVehicles:[]}),a.abrupt("return",t.push("/welcome"));case 10:throw new Error(r.error);case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(1),console.err(a.t0);case 17:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Disconnect Account and Logout"),r.a.createElement("div",{className:"logout__container padded"},r.a.createElement("button",{className:"button ".concat(o?"confirm--active":"confirm"),onClick:function(e){e.preventDefault(),s(!o)}},o?"Cancel Logout":"Logout"),o&&r.a.createElement("button",{className:"button disconnect",onClick:u},r.a.createElement("span",{className:"red"},"Confirm and Logout"))))};var we=function(e){var t=Object(n.useState)({name:e.user.name||"",email:e.user.email||"",password:""}),a=Object(L.a)(t,2),l=a[0],o=a[1],s=function(e){o(Object(V.a)(Object(V.a)({},l),{},Object(w.a)({},e.target.name,e.target.value)))},u=function(){var t=Object(i.a)(c.a.mark((function t(a){var n,r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=Object(V.a)({},e.user)).name=l.name,n.email=l.email,t.next=6,H(n);case 6:return r=t.sent,console.log("1"),console.log("TODO why props.user instead of the extant userUpdates?"),(o=e.user).log=r.log,o.vehicles=r.vehicles,o.selectedVehicles=l.selectedVehicles,t.next=15,e.updateUserState(o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Account"),r.a.createElement("form",{className:"padded",onSubmit:u,method:"POST"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",placeholder:"Enter name...",name:"name",value:l.name||"",onChange:s}),r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",placeholder:"Enter email...",name:"email",value:l.email||"",onChange:s}),r.a.createElement("input",{className:"button",type:"submit",value:"Save Account Changes"})))},ke=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState({vin:e.target.value})},n.vinSearch=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,r,l,o,s,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),n.state.vin){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.setState({loading:!0});case 6:return e.prev=6,e.next=9,fetch("https://vpic.nhtsa.dot.gov/api/vehicles/decodevin/".concat(n.state.vin,"?format=json"));case 9:return a=e.sent,e.next=12,a.json();case 12:return r=e.sent,e.next=15,r.Results;case 15:l=e.sent,0===Number(l[4].Value[0])?(o=l[9].Value,s=l[6].Value,i=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),u=l[8].Value,n.setState({vehicle:{year:o,make:i,model:u},loading:!1})):n.setState({resultsError:'No Results Found for VIN "'.concat(n.state.vin,'". Please try again.'),loading:!1}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),n.state={vin:"",resultsError:null,vehicle:{make:"",model:"",year:""},loading:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(O,{message:"Searching for VIN..."}):r.a.createElement("div",{className:"searchByVinDiv"},r.a.createElement("div",{className:"vinSearchInput"},r.a.createElement("label",{htmlFor:"vin"},"VIN"),r.a.createElement("input",{type:"text",name:"vin",value:this.state.vin,onChange:this.handleInputChange}),r.a.createElement("button",{className:"button",onClick:this.vinSearch},"Search For VIN")),r.a.createElement("div",{className:"vehicleResults"},this.state.resultsError&&r.a.createElement("span",null,this.state.resultsError),!this.state.resultsError&&this.state.vehicle&&this.state.vehicle.make.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Vehicle Found"),r.a.createElement("span",null,"Year: ".concat(this.state.vehicle.year)),r.a.createElement("span",null,"Make: ".concat(this.state.vehicle.make)),r.a.createElement("span",null,"Model: ".concat(this.state.vehicle.model)),r.a.createElement("button",{className:"button",onClick:function(){return e.props.saveNewVehicle(Object(V.a)({vin:e.state.vin},e.state.vehicle))}},"Add Vehicle To Account"))))}}]),a}(r.a.Component);var ye=function(e){var t=Object(n.useState)({year:e.year||"",make:e.make||"",model:e.model||"",vin:e.vin||"",odometer:e.odometer||0,primary:e.primary||!1,id:e._id||"",owner:e.owner||""}),a=Object(L.a)(t,2),l=a[0],o=a[1],s=function(e){o(Object(V.a)(Object(V.a)({},l),{},Object(w.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form manualVehicleEntryDiv"},r.a.createElement("label",{htmlFor:"year"},"Year"),r.a.createElement("input",{type:"number",name:"year",min:"1900",step:"1",value:l.year,onChange:s}),r.a.createElement("label",{htmlFor:"make"},"Make "),r.a.createElement("input",{type:"text",name:"make",value:l.make,onChange:s}),r.a.createElement("label",{htmlFor:"model"},"Model "),r.a.createElement("input",{type:"text",name:"model",value:l.model,onChange:s}),r.a.createElement("label",{htmlFor:"odometer"},"Latest Odometer Reading"),r.a.createElement("input",{type:"number",name:"odometer",min:"0",step:"0.1",value:l.odometer,onChange:s}),r.a.createElement("label",{htmlFor:"vin"},"VIN"),r.a.createElement("input",{type:"text",name:"vin",value:l.vin,onChange:s}),r.a.createElement("div",{className:"checkboxes__container"},r.a.createElement("label",{htmlFor:"primaryCheckbox"},"Main Vehicle"),r.a.createElement("input",{type:"checkbox",name:"primaryCheckbox",checked:l.primary,onChange:function(){o(Object(V.a)(Object(V.a)({},l),{},{primary:!l.primary}))}})),e.editing?r.a.createElement("button",{className:"button",onClick:function(){return e.saveVehicleChanges(l)}},"Save Vehicle Changes"):r.a.createElement("button",{className:"button",onClick:function(){return e.saveNewVehicle(l)}},"Add Vehicle To Account"))},Ne=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.setState(Object(w.a)({},t.target.name,t.target.value));case 3:if(n.state&&n.state.year&&n.state.make&&n.lookupModelsByYearAndMake(),!(n.state&&n.state.year&&n.state.make&&n.state.models&&n.state.model)){e.next=7;break}return e.next=7,n.setState({showConfirmButton:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={year:(new Date).getFullYear(),make:"",models:[],model:"",showConfirmButton:!1},n}return Object(m.a)(a,[{key:"lookupModelsByYearAndMake",value:function(){var e=Object(i.a)(c.a.mark((function e(){var t,a,n,r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state&&this.state.year&&this.state.make){e.next=2;break}return e.abrupt("return",console.log("leaving lookup early due to no year or make selected..."));case 2:t=this.state.year.toString()+this.state.make.toString(),null!==(a=localStorage.getItem(t))?(console.log("Duplicate query. Retrieving cache from localStorage..."),n=a.split(","),console.log(n),this.setState({models:n,showConfirmButton:!1})):fetch("https://vpic.nhtsa.dot.gov/api/vehicles/getmodelsformakeyear/make/".concat(this.state.make,"/modelyear/").concat(this.state.year,"?format=json")).then(function(){var e=Object(i.a)(c.a.mark((function e(a){var n,l,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:n=e.sent,(l=n.Results).sort((function(e,t){return e.Model_Name>t.Model_Name?1:e.Model_Name<t.Model_Name?-1:0})),(o=l.map((function(e){return e.Model_Name}))).length>0&&localStorage.setItem(t,o),r.setState((function(e){return{models:Object(me.a)(o),showConfirmButton:!1}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(new Date).getFullYear();return r.a.createElement("div",{className:"form vehicleLookupDiv"},r.a.createElement("div",{className:"vehicleLookupInput"},r.a.createElement("label",{htmlFor:"year"},"Year"),r.a.createElement("select",{name:"year",defaultValue:t,onChange:this.handleSelectChange},Array.from(Array(t-1920).keys()).map((function(e,a){return r.a.createElement("option",{key:a,value:t-a},t-a)}))),r.a.createElement("label",{htmlFor:"make"},"Make"),r.a.createElement("select",{name:"make",defaultValue:"",onChange:this.handleSelectChange},r.a.createElement("option",{value:"",disabled:"disabled"},"Select a manufacturer..."),$.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"model"},"Model"),r.a.createElement("select",{name:"model",defaultValue:"First select a make...",onChange:this.handleSelectChange},r.a.createElement("option",{value:"First select a make...",disabled:"disabled"},"First select a manufacturer..."),this.state.models.length>0&&this.state.models.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e)})))),this.state.showConfirmButton&&r.a.createElement("button",{className:"button",onClick:function(){return e.props.saveNewVehicle(e.state)}},"Add Vehicle To Account"))}}]),a}(r.a.Component);var Ce=function(e){console.log("loading vehicle settings with props:"),console.dir(e);var t=Object(b.g)(),a=Object(n.useState)(!1),l=Object(L.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(L.a)(u,2),d=m[0],p=m[1],h=Object(n.useState)(!1),g=Object(L.a)(h,2),v=g[0],f=g[1],_=Object(n.useState)(!1),k=Object(L.a)(_,2),y=k[0],N=k[1],S=Object(n.useState)({}),j=Object(L.a)(S,2),x=j[0],D=j[1],F=Object(n.useState)(!1),I=Object(L.a)(F,2),M=I[0],P=I[1],U=Object(n.useContext)(E),A=U.user,Y=U.updateUserState;Object(n.useEffect)((function(){if(e.vehicles&&e.vehicles.length>0){var t={};e.vehicles.forEach((function(e){t[e._id]=!1})),console.log("component mounting, initializing state for whether each individual vehicle is being edited or not"),console.log(t),0===Object.keys(x).length&&D(Object(V.a)({},t))}}),[e.vehicles,x]);var R=function(e){switch(s(!0),f(!1),p(!1),N(!1),e){case"showVinLookup":f(!0);break;case"showManualLookup":p(!0);break;case"showYearMakeModelLookup":N(!0);break;default:N(!0)}},q=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),t.make=t.make||"",t.model=t.model||"",t.odometer=t.odometer||0,t.vin=t.vin||"",t.year=t.year||"",t.primary=t.primary||!1,delete t.models,delete t.showConfirmButton,e.next=11,T(t);case 11:return a=e.sent,n=Object(V.a)(Object(V.a)({},A),{},{log:a.log,vehicles:a.vehicles}),e.next=15,Y(Object(V.a)({},n));case 15:s(!1),P(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id&&t.owner){e.next=2;break}return e.abrupt("return",new Error("Problem updating vehicle. Please try again."));case 2:return P(!0),t.make=t.make||"",t.model=t.model||"",t.odometer=t.odometer||0,t.vin=t.vin||"",t.year=t.year||"",t.primary=t.primary||!1,t._id=t.id,D(Object(V.a)(Object(V.a)({},x),{},Object(w.a)({},t._id,!x[t._id]))),e.next=13,B(t);case 13:return a=e.sent,n=Object(V.a)(Object(V.a)({},A),{},{log:a.log,vehicles:a.vehicles}),e.next=17,Y(Object(V.a)({},n));case 17:s(!1),P(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(i.a)(c.a.mark((function e(a){var n,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",alert("Unable to locate vehicle ID. Please try again."));case 2:return P(!0),console.log("Deleting vehicle: "+a),n="".concat("https://maint-log.herokuapp.com","/api/delete/vehicle/").concat(a),e.prev=5,e.next=8,C.a.post(n);case 8:if(r=e.sent,console.log("got results from delete vehicle post:"),console.dir(r),200!==r.status){e.next=21;break}return l=A.vehicles.filter((function(e){return e._id!==a})),console.log("Purged deleted vehicle. New vehicle list: "),console.log(l),delete A.vehicles,A.vehicles=Object(me.a)(l),e.next=19,Y(A);case 19:return P(!1),e.abrupt("return",t.push("/settings"));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),console.error(e.t0),P(!1);case 27:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}();return M?r.a.createElement(O,{message:"Loading/Updating Vehicle Settings..."}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Vehicle".concat((e.vehicles&&e.vehicles.length)>1?"s":"")),r.a.createElement("div",null,e.vehicles&&e.vehicles.length>0&&e.vehicles.map((function(e){return r.a.createElement("div",{key:e._id,className:"".concat(e.primary?"vehicle__container padded primary":"vehicle__container padded")},r.a.createElement("h4",null,e.year,"\xa0",e.make,"\xa0",e.model),r.a.createElement("div",{className:"card vehicle__editor"},r.a.createElement("button",{className:x[e._id]?"button warn":"button",onClick:function(){return D(Object(V.a)(Object(V.a)({},x),{},Object(w.a)({},e._id,!x[e._id])))}},x[e._id]?"Close Editor Without Saving":"Edit"),x[e._id]&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,Object.assign({},e,{saveNewVehicle:q,saveVehicleChanges:H,editing:!0})),r.a.createElement("button",{className:"button delete delete__vehicle",onClick:function(){return W(e._id)}},"Permanently Delete Vehicle"))))}))),r.a.createElement("div",{className:"add__vehicle__container padded"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("button",{className:"button",onClick:function(){return s(!1)}},"Hide Vehicle Search")),r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("span",null,"Find Vehicle By:"),r.a.createElement("button",{className:"lookup__button ".concat(y?"lookup__selected":""),onClick:function(){return R("showYearMakeModelLookup")}},"Make & Model"),r.a.createElement("button",{className:"lookup__button ".concat(v?"lookup__selected":""),onClick:function(){return R("showVinLookup")}},"VIN"),r.a.createElement("button",{className:"lookup__button ".concat(d?"lookup__selected":""),onClick:function(){return R("showManualLookup")}},"Manually Enter")),r.a.createElement("div",{className:"lookupSwitcher"},v&&r.a.createElement(ke,{currentVehicle:e.selectedVehicles&&e.selectedVehicles.length>0&&e.selectedVehicles[0]||{},saveNewVehicle:q}),y&&r.a.createElement(Ne,{currentVehicle:e.selectedVehicles&&e.selectedVehicles.length>0&&e.selectedVehicles[0]||{},saveNewVehicle:q}),d&&r.a.createElement(ye,{saveNewVehicle:q,saveVehicleChanges:H}))),!o&&r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("button",{className:"button",onClick:function(){return s(!0)}},"Add A New Vehicle"))))};a(92);var Oe=function(e){var t=Object(b.g)();return r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Settings"),r.a.createElement("div",{className:"padded"},r.a.createElement(Ce,{selectedVehicles:e.user.selectedVehicles,vehicles:e.user.vehicles,history:t}),r.a.createElement(we,{user:e.user,updateUserState:e.updateUserState}),r.a.createElement(K,null),r.a.createElement(_e,{history:t,user:e.user,updateUserState:e.updateUserState})))},Se=a(35),je=a.n(Se);a(93);var xe=function(e){var t=Object(b.i)().slug,a=e.user.log.filter((function(e){return e.slug===t})),n=a[0],l=n.id,o=n.shortDescription,s=n.longDescription,c=n.dateStarted,i=n.dateCompleted,u=n.dateEntered,m=n.dateDue,d=n.mileageDue,p=n.name,h=n.odometer,g=n.tools,v=n.parts,E=n.partsCost,_=n.laborCost,w=n.serviceLocation,k=n.photos,N=a[0].vehicle,C=e.user.vehicles.filter((function(e){return e.id===N}))[0];return r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"card"},r.a.createElement("h2",null,p.length>120?"".concat(p.substring(0,120),"..."):p),r.a.createElement("div",{className:"padded single__details"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Service Performed: "),r.a.createElement("span",null,o)),r.a.createElement("div",null,r.a.createElement("strong",null,"Date Entered: "),r.a.createElement("span",null,y()(u).format("MMM Do YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Vehicle: "),r.a.createElement("span",null,C.year," ",C.make," ",C.model," "," at "," ",h&&Number(h).toLocaleString()," "," miles"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Long Description: "),r.a.createElement("span",null,s)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Started: "),r.a.createElement("span",null,y()(c).format("MMM Do YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Completed: "),r.a.createElement("span",null,y()(i).format("MMM Do YYYY")))),r.a.createElement("div",null,(d||m)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Service is Due Next: "),r.a.createElement("span",null,d>0?"At ".concat(Number(d).toLocaleString()," miles. "):"[unset] miles. "," ",m&&y()(m).format("MMM Do YYYY")))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Tools: "),r.a.createElement("span",null,g)),r.a.createElement("div",null,r.a.createElement("strong",null,"Parts: "),r.a.createElement("span",null,v))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Parts Cost: "),r.a.createElement("span",null,"$",E&&E.toLocaleString())),r.a.createElement("div",null,r.a.createElement("strong",null,"Labor Cost: "),r.a.createElement("span",null,"$",_&&_.toLocaleString()))),r.a.createElement("div",null,r.a.createElement("strong",null,"Service Location: "),r.a.createElement("span",null,w)),r.a.createElement(f.b,{className:"button editPencil",to:"/log/".concat(l,"/edit")},r.a.createElement(Q.a,{src:je.a,role:"img","aria-label":"Edit Pencil Icon",fallback:function(){return r.a.createElement("img",{src:je.a,alt:"edit pencil icon",description:"edit pencil icon",className:"svg"})}}),r.a.createElement("h5",null,"Edit")),k&&k.length>0&&r.a.createElement(S,{photos:k,editingBlocked:!0}))))};var De=function(e){var t=Object(n.useState)([]),a=Object(L.a)(t,2),l=a[0],o=a[1],s=Object(n.useState)([]),c=Object(L.a)(s,2),i=c[0],u=c[1];return Object(n.useEffect)((function(){var t=[];e.user.selectedVehicles.length>0?e.user.selectedVehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})):e.user.vehicles.length>0&&e.user.vehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})),o([].concat(t));var a=e.user.log.filter((function(e){if(t.includes(e.vehicle)&&(null!==e.mileageDue||null!==e.dateDue))return e}));u(a)}),[]),r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Upcoming Service",Object.keys(i).length>1?"s":""),r.a.createElement(ie,{allVehicles:e.user.vehicles,vehiclesShowing:l,changeVehiclesShowing:function(t){var a=t.target.name,n=[];l.includes(a)?n=l.filter((function(e){return e!==a})):(n=l).push(a),o(n);var r=e.user.log.filter((function(e){if(n.includes(e.vehicle)&&(null!==e.mileageDue||null!==e.dateDue))return e}));u(r)}}),0===i.length&&r.a.createElement("div",{className:"card no__todos padded"},r.a.createElement("h3",null,"No Future-Due Log Entries Found!"),r.a.createElement("div",null,r.a.createElement("p",{className:"padded"},"No log entries for the vehicles selected. Please select more vehicles or add a new entry.")),r.a.createElement(f.b,{className:"button",to:"/add"},"Add A Log Entry Now"),r.a.createElement(f.b,{className:"button",to:"/log"},"Review Your Log")),i.length>0&&r.a.createElement("div",{className:"padded"},r.a.createElement(de,e),i&&i.map((function(e){return r.a.createElement(ue,{key:e._id,data:e})}))))};a(94);var Ve=function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement(f.c,{to:"/log",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(Q.a,{src:se.a,role:"img",className:"svg__dark__fill","aria-label":"Log Icon",fallback:function(){return r.a.createElement("img",{src:se.a,alt:"log icon",description:"log icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Log")),r.a.createElement(f.c,{to:"/add",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(Q.a,{src:te.a,role:"img",className:"svg__dark__fill","aria-label":"Add Icon",fallback:function(){return r.a.createElement("img",{src:te.a,alt:"add icon",description:"add icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Add")),r.a.createElement(f.c,{to:"/todo",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(Q.a,{src:ne.a,role:"img",className:"svg__dark__fill","aria-label":"Todo Icon",fallback:function(){return r.a.createElement("img",{src:ne.a,alt:"todo icon",description:"todo icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Todo")),r.a.createElement(f.c,{to:"/search",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(Q.a,{src:Z.a,role:"img",className:"svg__dark__fill","aria-label":"Search Icon",fallback:function(){return r.a.createElement("img",{src:Z.a,alt:"search icon",description:"search icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Search")),r.a.createElement(f.c,{to:"/settings",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(Q.a,{src:le.a,role:"img",className:"svg__dark__fill","aria-label":"Settings Icon",fallback:function(){return r.a.createElement("img",{src:le.a,alt:"settings icon",description:"settings icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Settings")))};var Le=function(e){var t=Object(n.useContext)(E),a=t.user,l=t.updateUserState,o=!1;return a&&Object.keys(a).length>0&&a.cookies&&a.cookies.length>0&&(o=!0),o?r.a.createElement(b.b,Object.assign({},e,{user:a,updateUserState:l}),e.children):r.a.createElement(b.a,{to:"/welcome"})};function Fe(){var e=Object(b.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Ie=a(36),Me=a.n(Ie);a(95);var Pe=function(){return r.a.createElement(f.b,{to:"/",className:"siteTitle"},r.a.createElement(Q.a,{src:Me.a,role:"img","aria-label":"Home Icon",className:"svg",fallback:function(){return r.a.createElement("img",{src:Me.a,alt:"home icon",description:"home icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h1",null,"Vehicle Maintenance Log"))};var Ue=function(){return r.a.createElement(f.a,null,r.a.createElement(Fe,null),r.a.createElement(Pe,null),r.a.createElement(v,null,(function(e){var t=e.user,a=e.updateUserState;return r.a.createElement("div",{className:"container"},r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/welcome"},r.a.createElement(G,null)),r.a.createElement(Le,{path:"/add"},r.a.createElement(x,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/log",exact:!0},r.a.createElement(pe,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/log/:id/edit",exact:!0},r.a.createElement(D,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/log/:slug",exact:!0},r.a.createElement(xe,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/search"},r.a.createElement(be,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/settings"},r.a.createElement(Oe,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/todo"},r.a.createElement(De,{user:t,updateUserState:a})),r.a.createElement(Le,{path:"/",exact:!0},r.a.createElement(ce,{user:t,updateUserState:a})),r.a.createElement(b.b,{path:"*"},r.a.createElement(he,null))),t&&t.cookies&&t.cookies.length>0&&r.a.createElement(Ve,null))})))},Ae=(a(96),a(97),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).updateUserState=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({user:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={user:{name:"",userID:"",sessionID:"",cookies:"",email:"",vehicles:[],log:[],selectedVehicles:[]},updateUserState:n.updateUserState},n}return Object(m.a)(a,[{key:"render",value:function(){var e={user:this.state.user,updateUserState:this.updateUserState};return r.a.createElement(g,{value:e},r.a.createElement(Ue,null))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.fcde47eb.chunk.js.map